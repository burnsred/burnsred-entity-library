{"version":3,"file":"development.js","sources":["../src/context.jsx","../src/duck.js","../../higher-order-component/withPropTypes/index.jsx","../../higher-order-component/withState/index.jsx","../src/query-duck-container.jsx","../src/query-duck.jsx","../src/middleware.js"],"sourcesContent":["import exact from 'prop-types-exact';\nimport PropTypes from 'prop-types';\nimport PropTypesPlus from '@gnowth/prop-types-plus';\nimport React from 'react';\n\nexport const { Provider, Consumer: DuckConsumer } = React.createContext({});\n\nexport const DuckProvider = ({ children, ...props }) => (\n  <Provider value={props}>\n    { children }\n  </Provider>\n);\n\nDuckProvider.propTypes = exact({\n  children: PropTypes.node.isRequired,\n  processingComponent: PropTypesPlus.isRequiredIf('processingComponentProps', PropTypesPlus.component),\n  processingComponentProps: PropTypes.shape({}),\n  processingDidFailComponent: PropTypesPlus.isRequiredIf('processingDidFailComponentProps', PropTypesPlus.component),\n  processingDidFailComponentProps: PropTypes.shape({}),\n  recordsCountComponent: PropTypesPlus.isRequiredIf('recordsCountComponentProps', PropTypesPlus.component),\n  recordsCountComponentProps: PropTypes.shape({}),\n  recordsCountNoneComponent: PropTypesPlus.isRequiredIf('recordsCountNoneComponentProps', PropTypesPlus.component),\n  recordsCountNoneComponentProps: PropTypes.shape({}),\n  store: PropTypes.shape({\n    dispatch: PropTypes.func.isRequired,\n    getState: PropTypes.func.isRequired,\n    subscribe: PropTypes.func.isRequired,\n  }).isRequired,\n});\n\nDuckProvider.defaultProps = {\n  processingComponent: undefined,\n  processingComponentProps: undefined,\n  processingDidFailComponent: undefined,\n  processingDidFailComponentProps: undefined,\n  recordsCountComponent: undefined,\n  recordsCountComponentProps: undefined,\n  recordsCountNoneComponent: undefined,\n  recordsCountNoneComponentProps: undefined,\n};\n\nexport const withDuck = Component => function DuckedComponent(props) {\n  return (\n    <DuckConsumer>\n      { context => <Component {...context} {...props} /> }\n    </DuckConsumer>\n  );\n};\n","import _compose from 'lodash/fp/compose';\nimport _isFunction from 'lodash/fp/isFunction';\nimport _mapValues from 'lodash/fp/mapValues';\nimport { handleActions } from 'redux-actions'; // TODO remove dependency\nimport { Entity } from '@gnowth/entity';\n\nexport default class Duck {\n  static createAction({\n    defaultMeta,\n    meta = ({ options }) => options,\n    payload: payloadCreator = options => options.payload,\n  } = {}) {\n    return ({ entity, keyAction }) => type => (payload, options = {}) => ({\n      type,\n      meta: Object.assign(\n        { keyAction, entity },\n        _isFunction(defaultMeta) ? defaultMeta({ entity, options, payload }) : defaultMeta,\n        meta({ entity, options, payload }),\n      ),\n      payload: payloadCreator({ entity, options, payload }),\n    });\n  }\n\n  static getInitialState({ entity }) {\n    return entity.dataToRecord({});\n  }\n\n  static toKey(app, entity) {\n    return keyAction => `@@${app}/${this.namespace}/${entity.name.toUpperCase()}_${keyAction.toUpperCase()}`;\n  }\n\n  constructor(options) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!options) throw new Error('\\'options\\' are required when creating a Duck');\n      if (!options.entity) throw new Error('\\'entity\\' option is required when creating a Duck');\n      if (!Entity.isEntity(options.entity)) throw new Error('\\'entity\\' option must be child of \\'Entity\\' when creating a Duck');\n      if (!options.app) throw new Error('\\'app\\' option is required when creating a Duck');\n      // TODO check that app start with capital letter\n    }\n\n    const actions = _mapValues.convert({ cap: false })(\n      (actionFactory, action) => _compose(\n        actionFactory({ entity: options.entity, keyAction: action }),\n        this.constructor.toKey(options.app, options.entity),\n      )(action),\n    )(this.constructor.actions);\n\n    Object.assign(this, actions, options);\n  }\n\n  createReducer() {\n    const duck = this.constructor;\n    const initialState = duck.getInitialState({ entity: this.entity });\n\n    return _compose(\n      reducerMap => handleActions(reducerMap, initialState),\n      types => duck.getReducers(types, initialState),\n      _mapValues.convert({ cap: false })((_, keyAction) => duck.toKey(this.app, this.entity)(keyAction)),\n    )(duck.actions);\n  }\n}\n","import React from 'react';\n\n// eslint-disable-next-line react/forbid-foreign-prop-types\nexport default ({ displayName, propTypes, defaultProps } = {}) => (Component) => {\n  const withPropTypes = (props) => {\n    return (<Component {...props} />);\n  };\n\n  withPropTypes.propTypes = propTypes;\n  withPropTypes.defaultProps = defaultProps;\n  withPropTypes.displayName = `withPropTypes-${displayName}`;\n\n  return withPropTypes;\n};\n","import _isFunction from 'lodash/fp/isFunction';\nimport React from 'react';\n\nexport default function ({ initialState = {}, mapProps: { state = 'state', setState = 'setState' } = {} }) {\n  return ComposedComponent => class withState extends React.Component {\n    // TODO to remove after test\n    // constructor(props) {\n    //   super(props);\n    //   this.state = _isFunction(initialState)\n    //     ? initialState(props)\n    //     : initialState;\n\n    //   this.mounted = true;\n    // }\n\n    state = _isFunction(initialState)\n      ? initialState(this.props)\n      : initialState;\n\n    // TODO find better pattern or mute only errors coming from onInputChange\n    componentWillUnmount() {\n      this.mounted = false;\n    }\n\n    mounted = true;\n\n    render() {\n      const props = Object.assign(\n        {},\n        this.props,\n        {\n          [state]: this.state,\n          [setState]: (...args) => this.mounted && this.setState(...args),\n        },\n      );\n\n      return <ComposedComponent {...props} />;\n    }\n  };\n}\n","import _compose from 'lodash/fp/compose';\nimport _omit from 'lodash/fp/omit';\nimport exact from 'prop-types-exact';\nimport PropTypes from 'prop-types';\nimport PropTypesImmutable from 'react-immutable-proptypes';\nimport PropTypesPlus from '@gnowth/prop-types-plus';\nimport { Map } from 'immutable';\nimport { connect } from 'react-redux';\n\nimport withPropTypes from '../../higher-order-component/withPropTypes';\nimport withState from '../../higher-order-component/withState';\nimport { withDuck } from './context';\n\nconst createDuckRef = action => ({\n  clear: (dispatch, options) => action.meta.keyClear\n    && dispatch(action.meta.entity.duck[action.meta.keyClear](options)),\n\n  pagination: (state, options) => action.meta.keyPagination\n    && action.meta.entity.duck[action.meta.keyPagination](state, options),\n\n  record: (state, options) => action.meta.keyRecord\n    && action.meta.entity.duck[action.meta.keyRecord](state, options),\n\n  save: (dispatch, value, options) => action.meta.keySave\n    && dispatch(action.meta.entity.duck[action.meta.keySave](value, options)),\n\n  status: (state, options) => !!action.meta.keyStatus\n    && action.meta.entity.duck[action.meta.keyStatus](state, options),\n});\n\nconst mapStateToProps = (state, props) => {\n  const action = props.withQueryDuckContainer_state.action || props.action({\n    search: props.withQueryDuckContainer_state.search,\n  });\n\n  const duckRef = createDuckRef(action);\n\n  return Object.assign(\n    {\n      action,\n      duckRef,\n      params: action.meta.params,\n      entity: action.meta.entity,\n      initialValue: duckRef.record(state, action.meta),\n      inputValue: props.withQueryDuckContainer_state.search,\n      isProcessing: s => duckRef.status(s, {\n        ...action.meta,\n        status: action.meta.keyProcessing,\n      }),\n      processing: duckRef.status(state, {\n        ...action.meta,\n        status: action.meta.keyProcessing,\n      }),\n      processingDidFail: duckRef.status(state, {\n        ...action.meta,\n        status: action.meta.keyProcessingDidFail,\n      }),\n      value: duckRef.record(state, { ...action.meta, dirty: true }),\n    },\n\n    action.meta.id === undefined && action.meta.entity.paginated && {\n      pagination: duckRef.pagination(state, action.meta),\n    },\n  );\n};\n\nconst mergeProps = (stateProps, dispatchProps, ownProps) => Object.assign(\n  {},\n  _omit(['withQueryDuckContainer_setState', 'withQueryDuckContainer_state'])(ownProps),\n  stateProps,\n  dispatchProps,\n  {\n    clear: options => stateProps.duckRef.clear(\n      dispatchProps.dispatch,\n      { ...stateProps.action.meta, ...options },\n    ),\n    onInputChange: search => ownProps.withQueryDuckContainer_setState({ search }),\n    process: () => !stateProps.processing\n      && !stateProps.processingDidFail\n      && dispatchProps.dispatch(ownProps.action({\n        search: ownProps.withQueryDuckContainer_state.search,\n      })),\n    save: value => stateProps.duckRef.save(\n      dispatchProps.dispatch,\n      value,\n      { ...stateProps.action.meta, dirty: true },\n    ),\n  },\n);\n\n// TODO remove exact or withPropTypes\nexport default _compose(\n  withPropTypes({\n    displayName: 'QueryDuckContainer',\n\n    propTypes: exact({\n      action: PropTypes.func.isRequired,\n      children: PropTypes.func, // TODO check with component\n      component: PropTypesPlus.component,\n      componentProps: PropTypes.shape({}),\n      filterParams: PropTypesImmutable.map,\n    }),\n\n    defaultProps: {\n      children: undefined,\n      componentProps: undefined,\n      filterParams: Map(),\n    },\n  }),\n\n  withState({\n    initialState: {\n      action: undefined,\n      search: '',\n    },\n\n    mapProps: {\n      state: 'withQueryDuckContainer_state',\n      setState: 'withQueryDuckContainer_setState',\n    },\n  }),\n\n  connect(mapStateToProps, null, mergeProps),\n\n  withDuck,\n);\n","import _debounce from 'lodash/fp/debounce';\nimport _isFunction from 'lodash/fp/isFunction';\nimport PropTypes from 'prop-types';\nimport PropTypesImmutable from 'react-immutable-proptypes';\nimport PropTypesPlus from '@gnowth/prop-types-plus';\nimport React from 'react';\nimport { Entity } from '@gnowth/entity';\n\nimport Duck from './duck';\nimport withQueryDuckContainer from './query-duck-container';\n\nclass QueryDuck extends React.Component {\n  componentDidMount() {\n    /**\n     * HACK(thierry): reading directly from the store\n     * to get the latest processing to prevent multiple network call\n     */\n    const shouldProcess = !this.props.isProcessing(this.props.store.getState())\n      && !(this.props.value && this.props.cached);\n\n    if (shouldProcess) {\n      this.props.process();\n    }\n  }\n\n  componentDidUpdate() {\n    const shouldProcess = !this.props.isProcessing(this.props.store.getState())\n      && !this.props.value;\n\n    if (shouldProcess) {\n      this.props.process();\n    }\n  }\n\n  componentWillUnmount() {\n    if (!this.props.persist) {\n      this.props.clear();\n    }\n\n    if (this.props.persist && !this.props.persistDirty) {\n      this.props.clear({ dirty: true });\n    }\n  }\n\n  getProps() {\n    return Object.assign(\n      {\n        field: this.props.entity.toEntityField(),\n        initialValue: this.props.initialValue,\n        inputValue: this.props.inputValue,\n        name: this.props.name,\n        onChange: this.handleChange,\n        onInputChange: this.handleInputChange,\n        value: this.props.value,\n      },\n\n      !this.props.shouldProcess && {\n        processing: this.props.processing,\n        processingDidFail: this.props.processingDidFail,\n      },\n    );\n  }\n\n  handleChange = ({ target: { index, name, value } }) => {\n    if (process.env.NODE_ENV !== 'production') {\n      if (name !== this.props.name) throw new Error(`QueryDuck (onChange): \"${name}\" name provided. Expecting name \"${this.props.name}\"`);\n      if (this.props.id !== undefined && index !== undefined) throw new Error('QueryDuck (onChange): index must be undefined as value is not a list');\n      if (index === null) throw new Error('QueryDuck (onChange): index cannot be null');\n    }\n\n    return this.props.save(\n      index === undefined\n        ? value\n        : this.props.value.set(index, value),\n    );\n  }\n\n  handleInputChange = _debounce(500)(this.props.onInputChange);\n\n  renderAsComponent(props) {\n    return (\n      <>\n        { this.props.shouldProcess\n          && this.props.processing\n          && this.props.processingComponent\n          && (\n            <this.props.processingComponent\n              {...(this.props.processingComponentProps || {})}\n            />\n          )\n        }\n\n        { this.props.shouldProcess\n          && this.props.processingDidFail\n          && this.props.processingDidFailComponent\n          && (\n            <this.props.processingDidFailComponent\n              {...(this.props.processingDidFailComponentProps || {})}\n            />\n          )\n        }\n\n        { this.props.shouldProcess\n          && !this.props.processing\n          && !this.props.processingDidFail\n          && !this.props.recordsCountHidden\n          && this.props.value !== undefined\n          && (\n            <this.props.recordsCountComponent\n              value={\n                this.props.entity.paginated && this.props.pagination\n                  ? this.props.pagination.get('count')\n                  : this.props.value.size\n              }\n              {...(this.props.recordsCountComponentProps || {})}\n            />\n          )\n        }\n\n        { this.props.shouldProcess\n          && !this.props.processing\n          && !this.props.processingDidFail\n          && !this.props.recordsCountHidden\n          && this.props.value !== undefined\n          && (\n            <this.props.recordsCountNoneComponent\n              {...(this.props.recordsCountNoneComponentProps || {})}\n            />\n          )\n        }\n\n        { this.props.shouldProcess\n          && !this.props.processing\n          && !this.props.processingDidFail\n          && this.props.value !== undefined\n          && (\n            this.props.many\n              ? this.renderComponentArray(props)\n              : this.renderComponent(props)\n          )\n        }\n\n        { !this.props.shouldProcess && this.renderComponent(props) }\n      </>\n    );\n  }\n\n  renderComponent(props) {\n    return (\n      <this.props.component\n        {...props}\n        {...(_isFunction(this.props.componentProps)\n          ? this.props.componentProps(props)\n          : (this.props.componentProps || {})\n        )}\n      />\n    );\n  }\n\n  renderComponentArray(props) {\n    return props.value.map((v, index) => (\n      <this.props.component\n        key={this.props.entity.getId(v)}\n        {...props}\n        index={index}\n        initialValue={props.initialValue?.get(index)}\n        records={props.value}\n        value={v}\n        {...(_isFunction(this.props.componentProps)\n          ? this.props.componentProps(Object.assign({}, props, {\n            index,\n            initialValue: props.initialValue?.get(index),\n            records: props.value,\n            value: v,\n          }))\n          : (this.props.componentProps || {})\n        )}\n      />\n    ));\n  }\n\n  render() {\n    return this.props.children\n      ? this.props.children(this.getProps())\n      : this.renderAsComponent(this.getProps());\n  }\n}\n\nQueryDuck.propTypes = {\n  cached: PropTypes.bool,\n  children: PropTypesPlus.isRequiredIfNot('component', PropTypes.func),\n  clear: PropTypes.func.isRequired,\n  entity: PropTypes.shape({\n    duck: PropTypes.instanceOf(Duck),\n    prototype: PropTypes.instanceOf(Entity),\n  }).isRequired,\n  component: PropTypesPlus.isRequiredIf('componentProps', PropTypesPlus.component),\n  componentProps: PropTypes.shape({}),\n  id: PropTypes.string,\n  initialValue: PropTypes.oneOfType([\n    PropTypesImmutable.list,\n    PropTypesImmutable.map,\n  ]), // TODO add: PropTypesPlus.ifElse(({ id }) === undefined, PropTypesImmutable.List, PropTypesImmutable.map)\n  inputValue: PropTypes.string,\n  isProcessing: PropTypes.func.isRequired,\n  many: PropTypes.bool, // TODO add: PropTypesPlus.notRequiredIf(({ id }) => id !== undefined)\n  name: PropTypes.string,\n  onInputChange: PropTypes.func.isRequired,\n  pagination: PropTypesImmutable.map, // PropTypesPlus.isRequiredIf(({ entity }) => entity?.paginated, PropTypesImmutable.map), // TODO add shape? innitialValue?\n  params: PropTypesImmutable.map.isRequired,\n  persist: PropTypes.bool,\n  persistDirty: PropTypes.bool, // TODO add: PropTypesPlus.notRequiredIf(({ persist }) => !persist)\n  process: PropTypes.func.isRequired,\n  processing: PropTypes.bool.isRequired,\n  processingComponent: PropTypesPlus.isRequiredIf('processingComponentProps', PropTypesPlus.component),\n  processingComponentProps: PropTypes.shape({}),\n  processingDidFail: PropTypes.bool.isRequired,\n  processingDidFailComponent: PropTypesPlus.isRequiredIf('processingDidFailComponentProps', PropTypesPlus.component),\n  processingDidFailComponentProps: PropTypes.shape({}),\n  recordsCountComponent: PropTypesPlus.isRequiredIf('recordsCountComponentProps', PropTypesPlus.component),\n  recordsCountComponentProps: PropTypes.shape({}),\n  recordsCountHidden: PropTypes.bool,\n  recordsCountNoneComponent: PropTypesPlus.isRequiredIf('recordsCountNoneComponentProps', PropTypesPlus.component),\n  recordsCountNoneComponentProps: PropTypes.shape({}),\n  save: PropTypes.func.isRequired,\n  shouldProcess: PropTypes.bool,\n  store: PropTypes.shape({\n    dispatch: PropTypes.func.isRequired,\n    getState: PropTypes.func.isRequired,\n    subscribe: PropTypes.func.isRequired,\n  }).isRequired,\n  value: PropTypes.oneOfType([\n    PropTypesImmutable.list,\n    PropTypesImmutable.map,\n  ]), // TODO add: PropTypesPlus.ifElse(({ id }) === undefined, PropTypesImmutable.List, PropTypesImmutable.map)\n};\n\nQueryDuck.defaultProps = {\n  cached: true,\n  children: undefined,\n  component: undefined,\n  componentProps: undefined,\n  id: undefined,\n  initialValue: undefined,\n  inputValue: '',\n  many: undefined,\n  name: 'query_duck',\n  pagination: undefined,\n  persist: true,\n  persistDirty: undefined,\n  processingComponent: undefined,\n  processingComponentProps: undefined,\n  processingDidFailComponent: undefined,\n  processingDidFailComponentProps: undefined,\n  recordsCountComponent: undefined,\n  recordsCountComponentProps: undefined,\n  recordsCountHidden: false,\n  recordsCountNoneComponent: undefined,\n  recordsCountNoneComponentProps: undefined,\n  shouldProcess: false,\n  value: undefined,\n};\n\nexport default withQueryDuckContainer(QueryDuck);\n","import _endsWith from 'lodash/fp/endsWith';\nimport _isFunction from 'lodash/fp/isFunction';\nimport axios from 'axios';\n\nimport Duck from './duck';\n\nconst handleResponse = (action, dispatch) => (response) => {\n  dispatch(action.meta.entity.duck[`${action.meta.keyAction}_resolved`](\n    response.data,\n    Object.assign({ payload: action.payload }, action.meta),\n  ));\n\n  if (_isFunction(action.meta.then)) {\n    action.meta.then({ ...action, response });\n  }\n};\n\nconst handleError = (action, dispatch) => (error) => {\n  if (process.env.NODE_ENV !== 'production') {\n    console.error(error); // eslint-disable-line no-console\n  }\n\n  dispatch(action.meta.entity.duck[`${action.meta.keyAction}_rejected`](\n    error,\n    Object.assign({ payload: action.payload }, action.meta),\n  ));\n\n  if (_isFunction(action.meta.catch)) {\n    action.meta.catch({ ...action, error });\n  }\n};\n\nexport default store => next => (action) => {\n  const shouldSkipMiddleware = !action.meta?.useEntityMiddleware\n    || _endsWith('_RESOLVED')(action.type)\n    || _endsWith('_REJECTED')(action.type)\n    || !(action.meta?.entity?.duck instanceof Duck);\n\n  if (shouldSkipMiddleware) {\n    return next(action);\n  }\n\n  const customAction = action.meta.action ? `${action.meta.action}/` : '';\n\n  const args = [\n    action.meta.id\n      ? `${action.meta.entity.apiBase}${action.meta.id}/${customAction}`\n      : `${action.meta.entity.apiBase}${customAction}`,\n    ...(action.payload ? [action.meta.entity.recordToData(action.payload)] : []),\n    {\n      params: action.meta.params\n        && action.meta.params.filter(p => p).toJS(), // TODO check that it is a string\n    },\n  ];\n\n  axios[action.meta.method]\n    .apply(null, args)\n    .then(handleResponse(action, store.dispatch))\n    .catch(handleError(action, store.dispatch));\n\n  return next(action);\n};\n"],"names":["React","createContext","Provider","DuckConsumer","Consumer","DuckProvider","children","props","propTypes","exact","PropTypes","node","isRequired","processingComponent","PropTypesPlus","isRequiredIf","component","processingComponentProps","shape","processingDidFailComponent","processingDidFailComponentProps","recordsCountComponent","recordsCountComponentProps","recordsCountNoneComponent","recordsCountNoneComponentProps","store","dispatch","func","getState","subscribe","defaultProps","undefined","withDuck","Component","DuckedComponent","context","Duck","createAction","defaultMeta","meta","options","payload","payloadCreator","entity","keyAction","type","Object","assign","_isFunction","getInitialState","dataToRecord","toKey","app","namespace","name","toUpperCase","constructor","process","env","NODE_ENV","Error","Entity","isEntity","actions","_mapValues","convert","cap","actionFactory","action","_compose","createReducer","duck","initialState","reducerMap","handleActions","types","getReducers","_","displayName","withPropTypes","mapProps","state","setState","ComposedComponent","withState","componentWillUnmount","mounted","render","args","createDuckRef","clear","keyClear","pagination","keyPagination","record","keyRecord","save","value","keySave","status","keyStatus","mapStateToProps","withQueryDuckContainer_state","search","duckRef","params","initialValue","inputValue","isProcessing","s","keyProcessing","processing","processingDidFail","keyProcessingDidFail","dirty","id","paginated","mergeProps","stateProps","dispatchProps","ownProps","_omit","onInputChange","withQueryDuckContainer_setState","componentProps","filterParams","PropTypesImmutable","map","Map","connect","QueryDuck","target","index","set","_debounce","componentDidMount","shouldProcess","cached","componentDidUpdate","persist","persistDirty","getProps","field","toEntityField","onChange","handleChange","handleInputChange","renderAsComponent","recordsCountHidden","get","size","many","renderComponentArray","renderComponent","v","getId","records","bool","isRequiredIfNot","instanceOf","prototype","string","oneOfType","list","withQueryDuckContainer","handleResponse","response","data","then","handleError","error","console","catch","next","shouldSkipMiddleware","useEntityMiddleware","_endsWith","customAction","apiBase","recordToData","filter","p","toJS","axios","method","apply"],"mappings":"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"}